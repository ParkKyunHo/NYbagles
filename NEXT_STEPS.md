# 뉴욕러브베이글 통합 관리 시스템 - 다음 단계 실행 계획

## 🎯 즉시 실행 가능한 작업 (우선순위 순)

### 1. ✅ Supabase Auth 문제 해결 (완료)
**문제**: "Database error creating new user" 에러로 인해 seed 스크립트 실행 불가

**해결 완료**:
- SQL 스크립트 작성 완료
- `/supabase/seed/01_initial_admin.sql` - 관리자 계정 생성
- `/supabase/seed/02_initial_data.sql` - 테스트 데이터 생성
- `/supabase/seed/README.md` - 실행 가이드

**실행 방법**:
1. Supabase 대시보드 → SQL Editor
2. 순서대로 스크립트 실행
3. 생성된 계정으로 로그인 테스트

### 2. 초기 데이터 설정
**목표**: 테스트 환경 구축을 위한 기본 데이터 생성

**작업 내용**:
- 서울 지역 생성
- 강남구, 종로구, 마포구 카테고리 생성
- 테스트 매장 4개 생성 (강남역점, 삼성점, 광화문점, 홍대점)
- 테스트 직원 계정 3개 생성 (매니저, 정직원, 파트타임)

### 3. ✅ 위치 기반 검증 구현 (완료)
**파일**: `/lib/utils/location.ts`

**구현 완료된 기능**:
- `calculateDistance()`: Haversine 공식을 사용한 거리 계산
- `isWithinRadius()`: 반경 내 위치 확인
- `getCurrentLocation()`: 브라우저 위치 정보 가져오기
- `validateCheckIn()`: 체크인 가능 여부 종합 검증
- `formatDistance()`: 거리 표시 포맷팅

**다음 단계**: QR 체크인 API에 위치 검증 통합

### 4. 출퇴근 알림 시스템
**구현 방식**: 
- Supabase Edge Functions 활용
- 이메일 알림 (Resend API 연동)
- 푸시 알림 (PWA Push API)

### 5. 지역 관리 페이지
**파일**: `/app/(dashboard)/admin/regions/page.tsx`

**기능**:
- 지역 목록 조회
- 새 지역 추가
- 지역 활성화/비활성화
- 지역별 매장 수 표시

## 🚀 구현 순서 및 예상 시간

1. **Supabase Auth 문제 해결** (1-2시간)
   - 대시보드 설정 확인
   - SQL로 관리자 계정 생성
   - 로그인 테스트

2. **초기 데이터 생성** (1시간)
   - SQL 스크립트 작성 및 실행
   - 데이터 검증

3. **위치 기반 검증** (2-3시간)
   - 유틸리티 함수 구현
   - QR 체크인 API 업데이트
   - 테스트 케이스 작성

4. **지역 관리 페이지** (3-4시간)
   - UI 컴포넌트 개발
   - API 연동
   - 권한 검증

5. **출퇴근 알림 시스템** (4-5시간)
   - Edge Function 생성
   - 알림 템플릿 작성
   - 알림 설정 UI

## 📝 테스트 체크리스트

### 기본 기능 테스트
- [ ] 관리자 로그인
- [ ] 직원 회원가입 및 승인
- [ ] QR 코드 생성 및 표시
- [ ] QR 스캔 및 출퇴근 기록
- [ ] 출퇴근 현황 대시보드

### 고급 기능 테스트
- [ ] 위치 기반 검증
- [ ] 30초 QR 갱신
- [ ] 역할별 메뉴 접근
- [ ] 모바일 반응형 디자인

## 🔧 개발 환경 설정

```bash
# 개발 서버 실행
npm run dev

# 타입 체크
npm run type-check

# 린트 실행
npm run lint

# 빌드 테스트
npm run build
```

## 📞 지원 및 문의

개발 중 문제가 발생하면:
1. `DEVELOPMENT_LOG.md`에 이슈 기록
2. 에러 메시지와 함께 상세 내용 문서화
3. 해결 방법 찾으면 문서에 추가

---
*작성일: 2025년 7월 27일*